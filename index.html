<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Vòng quay món ăn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
      background-image: url('https://cdn.tgdd.vn/2021/06/CookProduct/BeFunky-collage-1200x676-2.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    h1 {
      background-color: rgba(0, 0, 0, 0.6);
      padding: 10px;
      border-radius: 10px;
      display: inline-block;
      margin-bottom: 20px;
    }

    button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 10px 15px;
      border: none;
      border-radius: 8px;
      background-color: #ff9800;
      color: white;
      cursor: pointer;
      min-width: 120px;
    }

    button:hover {
      background-color: #f57c00;
    }

    .result {
      font-size: 20px;
      margin-top: 10px;
      background-color: rgba(0, 0, 0, 0.5);
      display: inline-block;
      padding: 10px 20px;
      border-radius: 10px;
      min-width: 280px;
      min-height: 40px;
    }

    .controls {
      margin-top: 15px;
    }

    #history {
      margin-top: 30px;
      background-color: rgba(0,0,0,0.5);
      max-width: 450px;
      margin-left: auto;
      margin-right: auto;
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      max-height: 200px;
      overflow-y: auto;
      font-size: 16px;
    }

    #reset-btn {
      position: fixed;
      bottom: 10px;
      right: 10px;
      font-size: 12px;
      padding: 6px 12px;
      background-color: #444;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s ease;
      z-index: 999;
    }

    #reset-btn:hover {
      opacity: 1;
    }

  </style>
</head>
<body>

  <h1>🎯 Vòng quay món ăn 🎯</h1>

  <div>
    <button onclick="spin('mặn')">Món mặn</button>
    <div id="result-mặn" class="result">Chưa chọn</div>
  </div>

  <div>
    <button onclick="spin('canh')">Món canh</button>
    <div id="result-canh" class="result">Chưa chọn</div>
  </div>

  <div class="controls">
    <button id="save-btn" onclick="saveMenu()">💾 Lưu thực đơn cho ngày mai</button>
  </div>

  <div id="history">
    <strong>Lịch sử chọn món:</strong>
    <div id="history-list"></div>
  </div>

  <button id="reset-btn" onclick="resetAll()">Làm mới</button>

<script>
  const data = {
    "mặn": [
      "Đậu phụ sốt cà chua",
      "Đậu phụ nhồi thịt băm hấp hoặc sốt",
      "Đậu phụ kho nấm đông cô",
      "Đậu phụ chiên giòn chấm nước tương",
      "Đậu phụ rim mặn ngọt",
      "Đậu phụ xào nấm và hành lá",
      "Thịt băm xào nấm hương",
      "Nấm đùi gà xào thịt băm",
      "Nấm kho tiêu với thịt băm",
      "Trứng hấp thịt băm và nấm",
      "Nấm xào bơ tỏi (ăn chay hoặc ăn kèm món mặn khác)",
      "Thịt băm rang sả ớt",
      "Thịt băm rim nước mắm tỏi",
      "Trứng chiên thịt băm",
      "Thịt băm xào đậu que",
      "Thịt băm xào su su / cà rốt",
      "Bầu nhồi thịt băm sốt nước tương",
      "Ruốc nấm"
    ],
    "canh": [
      "Canh nấm rơm nấu thịt băm",
      "Canh nấm kim châm thịt băm",
      "Canh bí đỏ thịt băm",
      "Canh cải bó xôi nấu thịt băm",
      "Canh cải ngọt thịt băm",
      "Canh cải thảo thịt băm",
      "Canh mồng tơi nấu tôm khô (hoặc thịt băm)",
      "Canh rong biển thịt băm và đậu phụ",
      "Canh bí xanh nhồi thịt băm",
      "Canh đậu phụ non và thịt băm",
      "Canh củ cải trắng nấu thịt băm",
      "Canh nấm đùi gà nấu rau cải"
    ]
  };

  let selected = {
    "mặn": null,
    "canh": null
  };

  // Đếm ngày đã lưu, bắt đầu từ 1
  let dayOffset = 1;

  function spin(type) {
    const items = data[type];
    if (items.length === 0) {
      alert("Đã chọn hết món " + type + " rồi!");
      return;
    }
    const idx = Math.floor(Math.random() * items.length);
    const result = items[idx];
    selected[type] = result;
    document.getElementById("result-" + type).innerText = "👉 " + result;
  }

  function saveMenu() {
    if (!selected["mặn"] || !selected["canh"]) {
      alert("Vui lòng chọn cả món mặn và món canh trước khi lưu.");
      return;
    }
    const today = new Date();
    // Tính ngày + offset
    const targetDate = new Date(today);
    targetDate.setDate(today.getDate() + dayOffset);

    // Định dạng ngày dd/mm/yyyy
    const dd = String(targetDate.getDate()).padStart(2, '0');
    const mm = String(targetDate.getMonth() + 1).padStart(2, '0');
    const yyyy = targetDate.getFullYear();
    const formattedDate = `${dd}/${mm}/${yyyy}`;

    const text = `Em Mia Iu chọn món: ${selected["mặn"]}, ${selected["canh"]} cho ngày ${formattedDate}`;
    const historyList = document.getElementById("history-list");

    // Thêm vào lịch sử
    const p = document.createElement("p");
    p.innerText = text;
    historyList.appendChild(p);

    // Tăng ngày offset lên 1 cho lần tiếp theo
    dayOffset++;

    // Reset chọn món để chọn món tiếp
    selected["mặn"] = null;
    selected["canh"] = null;
    document.getElementById("result-mặn").innerText = "Chưa chọn";
    document.getElementById("result-canh").innerText = "Chưa chọn";
  }

  function resetAll() {
    // Reset ngày offset, xóa lịch sử, reset chọn món
    dayOffset = 1;
    selected["mặn"] = null;
    selected["canh"] = null;
    document.getElementById("result-mặn").innerText = "Chưa chọn";
    document.getElementById("result-canh").innerText = "Chưa chọn";
    document.getElementById("history-list").innerHTML = "";
  }
</script>

</body>
</html>
